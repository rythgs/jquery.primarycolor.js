!function(t){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=r(jQuery);function a(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(){return(n=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}).apply(this,arguments)}var i=function(){function t(r,e){if(function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=r,this.options=e,this.primary={rgb:"",count:0},r instanceof Image){var a=new Image;a.crossOrigin="Anonymous",a.onload=this.onLoad.bind(this),a.src=r.src}}var r,e,n;return r=t,n=[{key:"getImageData",value:function(t){var r=document.createElement("canvas"),e=r.getContext("2d");return r.width=t.width,r.height=t.height,e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height)}},{key:"isApproximateColor",value:function(t,r){if(!t||!r)return!1;var e=t.split(",").map(Number),a=r.split(",").map(Number),n=e[0]-a[0],i=e[1]-a[1],o=e[2]-a[2];return Math.sqrt(n*n+i*i+o*o)<60}},{key:"sortColors",value:function(t){return Object.keys(t).sort((function(r,e){return t[e]-t[r]}))}}],(e=[{key:"onLoad",value:function(r){for(var e=t.getImageData(r.currentTarget).data,a=e.length/4,n={},i=0;i<a;i+=4*this.options.skip)if(!(e[i+3]<255)){var o=[e[i],e[i+1],e[i+2]].join(","),s=this.primary.rgb&&t.isApproximateColor(this.primary.rgb,o)?this.primary.rgb:o;n[s]=n[s]||0;var u=++n[s];u>this.primary.count&&(this.primary.rgb=s,this.primary.count=u)}"function"==typeof this.options.callback&&this.options.callback.call(this.element,this.primary.rgb,t.sortColors(n).slice(0,5))}},{key:"primaryColor",get:function(){return this.primary.rgb}}])&&a(r.prototype,e),n&&a(r,n),t}();e.default.fn.primaryColor=n((function(t){var r;if((r="function"==typeof t?e.default.extend({},e.default.fn.primaryColor.options,{callback:t}):e.default.extend({},e.default.fn.primaryColor.options,t)).skip<1)throw new Error('Please set "skip" to a value greater than 1.');return this.each((function(t,a){e.default.data(a,"primary-color")||e.default.data(a,"primary-color",new i(a,r))}))}),{options:{skip:5}})}();