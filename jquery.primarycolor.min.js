$.fn.primaryColor=function(a){var t={skip:5,exclude:["0,0,0"],callback:null};return a=$.extend({},t,a),this.each(function(){var t=document.createElement("canvas"),r=t.getContext("2d"),c=new Image,n=$(this),e=n.attr("data-primary-color");return e?("function"==typeof a.callback&&a.callback.call(n[0],e),!0):($(c).on("load",function(){r.drawImage(this,0,0);for(var t=r.getImageData(0,0,c.width,c.height),e=t.data.length,l=t.data,o={},i={rgb:"",count:0},u=0;e>u;u+=4*a.skip){var d=[l[u],l[u+1],l[u+2]].join(",");~$.inArray(d,a.exclude)||(d in o?o[d]++:o[d]=1);var g=o[d];g>i.count&&(i.rgb=d,i.count=g)}n.attr("data-primary-color",i.rgb),"function"==typeof a.callback&&a.callback.call(n[0],i.rgb)}),c.src=this.src||"",void 0)})};