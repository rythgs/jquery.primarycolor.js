!function(t){"use strict";t.fn.primaryColor=function(a){function n(){return document.createElement("canvas").getContext("2d")}function r(r,c){var e=n();e.drawImage(r,0,0);for(var o=e.getImageData(0,0,r.width,r.height),i=o.data.length,l=o.data,u={},d={rgb:"",count:0},f=0;i>f;f+=4*a.skip){var s=[l[f],l[f+1],l[f+2]].join(",");~t.inArray(s,a.exclude)||(s in u?u[s]++:u[s]=1);var g=u[s];g>d.count&&(d.rgb=s,d.count=g)}c.attr("data-primary-color",d.rgb),"function"==typeof a.callback&&a.callback.call(c[0],d.rgb)}return a=t.extend({skip:5,exclude:["0,0,0"],callback:null},a),this.each(function(){var n=t(this),c=new Image,e=n.attr("data-primary-color");return e?("function"==typeof a.callback&&a.callback.call(n[0],e),!0):(t(c).on("load",function(){r(this,n)}),c.src=this.src||"",void 0)}),this}}(jQuery);